import numpy as np

a30_50 = [266,297,356,310,287,305,286,278,318,331,300,268,292,180,277,272,244,245,255,257]
b30_50 = [401,440,433,434,481,465,478,444,485,502,462,469,459,480,460,422,433,398,398,425]
b50_70 = [371,457,419,438,402,397,427,407,368,391,369,339,427,391,383,398,402,343,403,371]
x = np.array(a30_50)
y = np.array(b50_70)
# 计算皮尔逊相关系数
r_pearson = np.corrcoef(x, y)[0, 1]

print(f"皮尔逊相关系数是: {r_pearson}")
a = [12,13,19,20,22,23,17,20,11,11,6,17,13,14,14,17,21,19,21,19,18,25,28,24,26,30,20,20,27,25,32,26,52,31,34,37,37,46,40,45,53,60,61,60,65,92,71,69,77,96,101,100,125,126,145,189,195,177,196,176,215,190,232,227,273,246,228,279,212,330,263,312,232,283,322,327,301,301,268,266,297,356,310,287,305,286,278,318,331,300,268,292,180,277,272,244,245,255,257,254,274,278,245,261,300,272,217,240,257,229,279,324,246,277,280,277,232,253,266,252,250,262,236,256,262,246,231,249,282,249,250,274,254,248,276,235,229,257,275,277,256,278,244,228,226,251,226,281,224,251,227,276,258,268,255,281,246,249,322,276,244,245,240,290,311,317,249,276,284,307,300,305,291,287,280,266,321,301,286,291,277,311,274,294,277,271,268,259,291,275,297,255,252,323,324,326,332,281,276,321,274,247,258,236,247,242,211,204,192,203,204,178,185,197,166,128,136,148,129,134,123,135,110,139,122,114,99,114,109,97,117,104,107,91,98,77,91,80,90,79,62,85,87,86,80,99,85,92,63,70,83,63,56,63,75,87,64,41,34,49,38,34,35,34,44,27,38,38,30,31,26,30,35,21,33,37,28,20,17,20,13,21,31,18,21,30,22,17]
b = [46,50,52,45,44,40,42,36,42,32,28,27,40,42,43,41,62,43,33,48,36,47,43,47,53,43,65,48,57,61,65,71,80,71,70,80,86,79,95,94,102,111,124,120,154,139,129,138,160,190,187,199,221,241,248,286,334,341,315,336,398,424,450,472,504,538,468,468,500,490,450,451,443,443,445,452,458,441,419,401,440,433,434,481,465,478,444,485,502,462,469,459,480,460,422,433,398,398,425,371,457,419,438,402,397,427,407,368,391,369,339,427,391,383,398,402,343,403,371,413,382,416,369,373,354,383,369,391,411,337,366,375,379,414,393,352,332,407,376,410,370,385,388,393,337,388,411,403,388,389,394,389,433,420,438,407,406,432,425,441,439,361,395,411,449,409,442,414,421,474,512,455,484,482,450,455,453,465,426,407,456,444,470,452,440,443,402,450,453,429,454,440,378,449,477,481,425,419,381,408,407,377,368,361,414,404,304,520,391,338,361,322,354,314,329,286,255,273,255,274,244,245,233,282,205,216,223,220,234,221,231,226,192,187,228,196,215,172,228,197,166,181,192,201,179,196,197,185,185,156,171,168,131,164,157,168,129,99,114,121,88,84,96,72,97,101,120,101,88,74,90,74,86,83,65,62,78,62,80,65,63,54,58,50,54,56,58,44]

sub_pearson = -1
max_pearson = -1
step = 20
sub = 5
add = 15
start = 0
for i in range(start,190):
    for j in range(start,190):
        x = np.array(a[i:i+step])
        y = np.array(b[j:j+step])
        # 计算皮尔逊相关系数
        r_pearson = np.corrcoef(x, y)[0, 1]
        if r_pearson>max_pearson:
            max_pearson = r_pearson
            # print(max_pearson,i,j)
        if r_pearson>sub_pearson and abs(i-j)>=sub and abs(i-j)<=add:
            sub_pearson = r_pearson
            print(sub_pearson,i,j,x,y)
